define(["core/templates","core/str"],function(e,n){var o="",t="",a=0,r=function(n){n.preventDefault();n.target;var o=document.getElementById("block_onlineexam_contentframe"),t=null;null!==o?t=e.render("block_onlineexam/modal-iframe",{src:o.src+"&modalZoom=1",title:""}):(o=parent.document.querySelector("iframe"),t=e.render("block_onlineexam/modal-iframe",{src:o.src+"&modalZoom=1",title:""})),t.done(function(e,n){var o=document.createElement("div");o.innerHTML=e;var t=o.firstChild;document.body.insertBefore(t,document.body.firstChild),document.body.className+=" block_onlineexam_custom-modal-open";var a=function(e){e.target;document.body.className=document.body.className.replace(" block_onlineexam_custom-modal-open",""),function(){var e=document.getElementById("block_onlineexam_contentframe");if(e){var n=e.src;e.src="",e.src=n}}(),t.className+=" fading",setTimeout(function(){null!==t.parentNode&&t.parentNode.removeChild(t)},250)};t.querySelector(".block_onlineexam_custom-modal_close-button").addEventListener("click",function(e){return e.preventDefault(),a(e)}),t.addEventListener("click",function(e){return e.preventDefault(),e.target===t&&a(e)})})};return{init:function(e,n,c){o=e,t=n,a=c,document.getElementById("block_onlineexam_exams_content").addEventListener("click",r),window.EVAEXAM={generate_popupinfo:this.generate_popupinfo},window.evaexamGeneratePopupinfo=this.generate_popupinfo},generate_popupinfo:function(){var n=sessionStorage.getItem("onlineexam_popupinfo");0!=n&&null!=n&&n==a||(sessionStorage.setItem("onlineexam_popupinfo",a),e.render("block_onlineexam/popupinfo",{title:o,content:t}).done(function(e,n){var o=document.createElement("div");o.innerHTML=e;var t=o.firstChild;document.body.insertBefore(t,document.body.firstChild),document.body.className+=" block_onlineexam_custom-modal-open popupinfo";var a=function(e){e.target;document.body.className=document.body.className.replace(" block_onlineexam_custom-modal-open",""),t.className+=" fading",setTimeout(function(){null!==t.parentNode&&t.parentNode.removeChild(t)},250)};t.querySelector(".block_onlineexam_custom-modal_close-button").addEventListener("click",function(e){return e.preventDefault(),a(e)}),t.addEventListener("click",function(e){return e.preventDefault(),e.target===t&&a(e)})}))}}});